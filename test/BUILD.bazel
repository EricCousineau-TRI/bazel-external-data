# -*- python -*-
load(":meta_test.bzl", "meta_test")

sh_test(
    name = "workflows_test",
    srcs = ["copy_and_test.sh"],
    args = [
        "$${PWD}/$(location workflows_test.sh)",
        "$(location pkgs/bazel_pkg_advanced_test)",
    ],
    data = [
        # Consume the directory so that we may copy it.
        "workflows_test.sh",
        ":pkgs/bazel_pkg_advanced_test",
        "//:pkg_data",
    ],
)

meta_test(
    workspace = "bazel_pkg_test",
)

meta_test(
    workspace = "bazel_pkg_advanced_test",
)

meta_test(
    workspace = "bazel_pkg_downstream_test",
    workspace_deps = [
        "bazel_pkg_test",
    ],
)
